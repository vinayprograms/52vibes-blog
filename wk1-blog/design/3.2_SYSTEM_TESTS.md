# SYSTEM TESTS

This document specifies exhaustive system test procedures for validating the 52vibes platform against all technical requirements in `3.1_TECH_REQUIREMENTS.md`. Tests are designed for autonomous execution by an LLM testing agent with minimal human supervision.

Every technical requirement has corresponding test specifications with sub-scenarios covering: happy path, boundary conditions, error handling, adversarial inputs, accessibility edge cases, cross-browser compatibility, and state transitions.

---

## TEST PHILOSOPHY

### Coverage Principles

1. **1:1+ Requirement Coverage** — Every technical requirement has at least one dedicated test
2. **Boundary Testing** — Test limits, not just midpoints (min/max values, empty/full states)
3. **Negative Testing** — Verify graceful handling of invalid inputs and failure conditions
4. **Adversarial Testing** — Attempt to break the system with malicious inputs
5. **State Explosion** — Test all meaningful state combinations
6. **Environmental Variation** — Test across browsers, devices, network conditions, accessibility modes

### Test Notation

Each test uses the following structure:

```
* **TEST_ID** - Test title
  + **Requirement:** TECH_REQ_ID(s)
  + **Precondition:** Setup required before test
  + **Steps:** Numbered execution steps
  + **Expected:** What should happen
  + **Pass Criteria:** Specific measurable outcomes
  + **Sub-scenarios:**
    - Scenario A: Variation description
    - Scenario B: Variation description
```

### Environment Matrix

Tests MUST be executed across:

| Dimension | Variations |
|-----------|------------|
| Browser | Chrome 120+, Firefox 120+, Safari 17+, Edge 120+ |
| Viewport | 320px, 375px, 768px, 1024px, 1440px, 2560px |
| Theme | Light, Dark, System-preference |
| JavaScript | Enabled, Disabled |
| Network | Fast 4G, Slow 3G, Offline (where applicable) |
| Accessibility | Screen reader (VoiceOver/NVDA), Keyboard-only, High contrast |
| CLI Browser | lynx, w3m, links |

---

## TEST ENVIRONMENT SETUP

### Required Tools

```bash
# Core tools
hugo extended v0.139.0+
go 1.23+
node 18+ (for Lighthouse CLI)
python 3.10+ (for test automation scripts)

# Browsers
google-chrome --version
firefox --version
safari (macOS only)

# CLI browsers
lynx --version
w3m -version

# Testing utilities
lighthouse --version
axe-core (via npm)
pa11y (via npm)
curl
jq
imagemagick (identify, convert)

# Network simulation
throttle (npm package) or Chrome DevTools

# Accessibility
voiceover (macOS) or nvda (Windows)
```

### Test Data Requirements

1. **Published Posts:** Minimum 3 (Week 1, Week 2, Week 13 for quarter boundary)
2. **Draft Post:** At least 1 unpublished post
3. **Session Data:** `.crush/crush.db` with at least 3 sessions
4. **Empty States:** Ability to simulate empty community repos, empty RSS
5. **Long Content:** Post with 5000+ words for scroll/performance testing
6. **Code Samples:** Posts with code in Go, Python, JavaScript, Bash, YAML, JSON
7. **Images:** Posts with various image sizes and formats
8. **Special Characters:** Post titles with unicode, quotes, ampersands

---

## BLOG PLATFORM TESTS

### BUILD SYSTEM TESTS

#### BLOG_TEST_001 — Hugo Version Pinning

* **Requirement:** BLOG001, BLOG002
* **Precondition:** Fresh repository clone
* **Steps:**
  1. Read `.hugo-version` file
  2. Record version string (e.g., "0.139.0")
  3. Run `hugo version`
  4. Extract version from output
  5. Compare versions
* **Expected:** Versions match exactly
* **Pass Criteria:** `.hugo-version` content equals installed Hugo version
* **Sub-scenarios:**
  - **001a:** Version file missing — Build MUST fail with clear error
  - **001b:** Version mismatch (older Hugo) — Document behavior (warn or fail)
  - **001c:** Version mismatch (newer Hugo) — Document behavior
  - **001d:** Version file has trailing newline — Should still parse correctly
  - **001e:** Version file has leading/trailing whitespace — Should trim and match

#### BLOG_TEST_002 — Build Without External Dependencies

* **Requirement:** BLOG003, BLOG004, BLOG005
* **Precondition:** Clean environment (no node_modules, no cached Go modules)
* **Steps:**
  1. Clone repository to temp directory
  2. Verify no `package.json` exists
  3. Verify no `node_modules/` exists
  4. Verify no `yarn.lock` exists
  5. Verify no `package-lock.json` exists
  6. Run `hugo --minify`
  7. Record exit code
  8. Record build duration
  9. Verify `public/` directory created
  10. Count files in `public/`
* **Expected:** Build succeeds with only Hugo
* **Pass Criteria:** Exit code 0, public/ populated, no JS package files
* **Sub-scenarios:**
  - **002a:** Build with `--gc` flag — Should also succeed
  - **002b:** Build with `--cleanDestinationDir` — Should clear and rebuild
  - **002c:** Concurrent builds — Two simultaneous builds should not corrupt output
  - **002d:** Build after partial failure — Should recover cleanly
  - **002e:** Build with missing content file — Should fail gracefully with file path in error

#### BLOG_TEST_003 — Build Output Structure Validation

* **Requirement:** BLOG005, BLOG006
* **Precondition:** Successful build
* **Steps:**
  1. Verify `public/index.html` exists
  2. Verify `public/blog/index.html` exists
  3. Verify `public/about/index.html` exists
  4. Verify `public/community/index.html` exists
  5. Verify `public/blog/weeks/index.html` exists
  6. Verify `public/blog/reports/index.html` exists
  7. Verify `public/attributions/index.html` exists
  8. Verify `public/sitemap.xml` exists
  9. Verify `public/robots.txt` exists
  10. Verify `public/blog/index.xml` (RSS) exists
  11. For each published week N in `data/weeks.yaml`:
      - Verify `public/blog/week-{NN}-*/index.html` exists
  12. Verify `public/css/` contains fingerprinted CSS
  13. Verify `public/fonts/` contains WOFF2 files
  14. Verify `public/images/social/` contains PNG files
* **Expected:** Complete build output structure
* **Pass Criteria:** All expected files present
* **Sub-scenarios:**
  - **003a:** Draft posts — Should NOT appear in public/
  - **003b:** Future-dated posts — Should NOT appear (unless `--buildFuture`)
  - **003c:** Expired posts — Should NOT appear (unless `--buildExpired`)
  - **003d:** Empty sections — Index pages should still be generated
  - **003e:** Unicode in filenames — Should be URL-encoded properly

#### BLOG_TEST_004 — Hugo Pipes CSS Processing

* **Requirement:** BLOG007
* **Precondition:** Successful build
* **Steps:**
  1. List files in `public/css/` or `public/` matching `*.css`
  2. Identify main CSS file
  3. Verify filename contains hash (fingerprint): `main.{hash}.min.css`
  4. Measure file size
  5. Verify size < 30KB (30720 bytes)
  6. Check for minification indicators:
     - No comments (except licenses if required)
     - Minimal whitespace
     - No empty rules
  7. Validate CSS syntax using css-validator or stylelint
* **Expected:** Fingerprinted, minified, valid CSS
* **Pass Criteria:** Hash in filename, < 30KB, no syntax errors
* **Sub-scenarios:**
  - **004a:** CSS file unchanged between builds — Hash should be identical
  - **004b:** CSS file modified — Hash should change
  - **004c:** CSS with syntax error in source — Build should fail
  - **004d:** Very large CSS (over limit) — Should warn or fail based on config
  - **004e:** CSS with @import statements — Should be resolved at build time

#### BLOG_TEST_005 — Build Determinism

* **Requirement:** BLOG189
* **Precondition:** Clean repository
* **Steps:**
  1. Run `hugo --minify`, capture output hash of `public/`
  2. Run `rm -rf public/`
  3. Run `hugo --minify` again
  4. Capture output hash of `public/`
  5. Compare hashes
  6. If different, identify differing files
* **Expected:** Identical builds from same source
* **Pass Criteria:** Hash match (or documented acceptable differences like timestamps)
* **Sub-scenarios:**
  - **005a:** Build on different machines — Should produce same output
  - **005b:** Build with different Hugo patch versions — Document differences
  - **005c:** Build after `git clean -fdx` — Should be identical
  - **005d:** Build with different timezone — Should not affect output content

---

### CSS ARCHITECTURE TESTS

#### BLOG_TEST_006 — CSS Custom Properties for Theming

* **Requirement:** BLOG013, BLOG014, BLOG015, BLOG016
* **Precondition:** Access to source CSS (`assets/css/main.css`)
* **Steps:**
  1. Parse CSS file
  2. Locate `:root` selector block
  3. Extract all custom properties (variables starting with `--`)
  4. Verify presence of theme variables:
     - `--bg-primary` or equivalent
     - `--bg-secondary` or equivalent
     - `--fg-primary` or equivalent
     - `--fg-secondary` or equivalent
     - `--accent` or equivalent
     - `--accent-secondary` or equivalent
     - `--border` or equivalent
  5. Locate `[data-theme="dark"]` selector block
  6. Verify same variables are overridden
  7. Extract and compare values between themes
* **Expected:** Complete theme variable definitions in both themes
* **Pass Criteria:** All required variables defined in both `:root` and `[data-theme="dark"]`
* **Sub-scenarios:**
  - **006a:** Variable naming consistency — All theme-related properties use consistent prefix
  - **006b:** Fallback values — Variables have fallback: `var(--color, #fallback)`
  - **006c:** Computed values — `calc()` expressions using variables work correctly
  - **006d:** Media query overrides — Variables may have responsive adjustments
  - **006e:** Print styles — Verify print-specific variable values if defined

#### BLOG_TEST_007 — Gruvbox Color Palette Accuracy

* **Requirement:** BLOG020, BLOG021, BLOG022, BLOG023, BLOG024, BLOG025, BLOG026
* **Precondition:** CSS variables extracted
* **Steps:**
  1. Extract dark theme background color
  2. Verify equals `#1d2021` (case-insensitive) or document approved variant
  3. Extract dark theme foreground color
  4. Verify equals `#ebdbb2` or approved variant
  5. Extract light theme background color
  6. Verify equals `#fbf1c7` or approved variant
  7. Extract light theme foreground color
  8. Verify equals `#3c3836` or approved variant
  9. Extract accent color
  10. Verify equals `#d65d0e` (Gruvbox orange) or approved variant
  11. Extract secondary accent
  12. Verify equals `#458588` (Gruvbox blue) or approved variant
  13. Extract border color
  14. Verify equals `#928374` (Gruvbox gray) or approved variant
* **Expected:** All colors match Gruvbox specification
* **Pass Criteria:** Exact hex match or documented approved variants
* **Sub-scenarios:**
  - **007a:** RGB notation — Should accept `rgb(29, 32, 33)` equivalent
  - **007b:** HSL notation — Should accept HSL equivalent
  - **007c:** Color-mix() usage — Modern CSS color mixing is acceptable if result matches
  - **007d:** Alpha variations — `#1d202199` (with alpha) should be flagged unless intentional

#### BLOG_TEST_008 — WCAG Color Contrast Compliance

* **Requirement:** BLOG027, BLOG156
* **Precondition:** Color values extracted from both themes
* **Steps:**
  1. For dark theme:
     - Calculate contrast: foreground (#ebdbb2) vs background (#1d2021)
     - Calculate contrast: accent (#d65d0e) vs background (#1d2021)
     - Calculate contrast: secondary accent (#458588) vs background (#1d2021)
     - Calculate contrast: border (#928374) vs background (#1d2021)
  2. For light theme:
     - Calculate contrast: foreground (#3c3836) vs background (#fbf1c7)
     - Calculate contrast: accent (#d65d0e) vs background (#fbf1c7)
     - Calculate contrast: secondary accent (#458588) vs background (#fbf1c7)
  3. Use WCAG contrast formula
  4. Compare against thresholds:
     - Normal text: ≥ 4.5:1
     - Large text (18pt+): ≥ 3:1
     - UI components: ≥ 3:1
* **Expected:** All combinations meet WCAG AA
* **Pass Criteria:** No contrast ratio below threshold for its use case
* **Sub-scenarios:**
  - **008a:** Syntax highlighting colors — All highlight colors meet contrast
  - **008b:** Disabled state colors — May have reduced contrast (document)
  - **008c:** Placeholder text — Should still meet 4.5:1 or be labeled
  - **008d:** Link underlines — If color-only, must have additional indicator
  - **008e:** Focus indicators — Must have ≥ 3:1 against adjacent colors
  - **008f:** Error states — Red error text meets contrast on both themes
  - **008g:** Success states — Green success text meets contrast on both themes
  - **008h:** Warning states — Orange/yellow warning meets contrast

#### BLOG_TEST_009 — BEM Naming Convention Compliance

* **Requirement:** BLOG014
* **Precondition:** Access to source CSS
* **Steps:**
  1. Extract all class selectors from CSS
  2. For each selector:
     - Check if matches BEM pattern: `.block`, `.block__element`, `.block--modifier`
     - Or utility pattern: `.u-*`, `.is-*`, `.has-*`
     - Or state pattern: `.is-active`, `.is-hidden`
  3. Count compliant vs non-compliant selectors
  4. Calculate compliance percentage
  5. List non-compliant selectors for review
* **Expected:** Consistent naming convention
* **Pass Criteria:** > 90% BEM compliance (allowing utility classes)
* **Sub-scenarios:**
  - **009a:** Nested BEM — `.block__element__subelement` is discouraged; flag
  - **009b:** Chained modifiers — `.block--mod1--mod2` is invalid; flag
  - **009c:** Hugo-generated classes — Document any framework-imposed names
  - **009d:** Third-party CSS — Chroma highlight classes may not follow BEM

#### BLOG_TEST_010 — Critical CSS Strategy

* **Requirement:** BLOG017, PERF019
* **Precondition:** Built site, access to HTML output
* **Steps:**
  1. Fetch any HTML page
  2. Search for `<style>` tags in `<head>`
  3. If found, extract inline CSS content
  4. Measure inline CSS size
  5. Verify inline CSS contains above-the-fold styles:
     - Body/html base styles
     - Header styles
     - Navigation styles
     - Typography basics
  6. Verify external stylesheet loaded after critical CSS
  7. Verify external stylesheet has fingerprinted URL
* **Expected:** Critical CSS inlined, rest external
* **Pass Criteria:** Above-fold content styled without external CSS blocking
* **Sub-scenarios:**
  - **010a:** No inline CSS — Acceptable if external CSS is preloaded
  - **010b:** All CSS inline — Acceptable for very small sites (< 14KB)
  - **010c:** CSS in body — Should NOT appear (render blocking)
  - **010d:** Multiple external stylesheets — Should be consolidated

#### BLOG_TEST_011 — CSS File Size Budget

* **Requirement:** BLOG019, PERF012
* **Precondition:** Built site
* **Steps:**
  1. Locate all CSS files in build output
  2. Measure each file's uncompressed size
  3. Sum total CSS size
  4. Measure gzipped size (for transfer size)
  5. Compare against budget: 30KB uncompressed
* **Expected:** Total CSS within budget
* **Pass Criteria:** Uncompressed CSS ≤ 30KB
* **Sub-scenarios:**
  - **011a:** CSS exceeds budget — List largest rule sets for optimization
  - **011b:** Unused CSS detection — Run PurgeCSS analysis, report unused
  - **011c:** CSS duplication — Identify repeated patterns
  - **011d:** Print stylesheet size — Should be minimal addition

---

### TYPOGRAPHY TESTS

#### BLOG_TEST_012 — Font File Self-Hosting

* **Requirement:** BLOG028, BLOG029, BLOG030, SEC015
* **Precondition:** Access to repository and built site
* **Steps:**
  1. Verify existence of font files:
     - `static/fonts/IBMPlexSans-Regular.woff2`
     - `static/fonts/IBMPlexSans-Bold.woff2`
     - `static/fonts/IBMPlexSans-Italic.woff2`
     - `static/fonts/IBMPlexSans-BoldItalic.woff2` (if used)
     - `static/fonts/JetBrainsMono-Regular.woff2`
     - `static/fonts/JetBrainsMono-Bold.woff2`
  2. Verify all fonts are WOFF2 format (check file headers: `wOF2`)
  3. Verify no WOFF, TTF, OTF, EOT files (WOFF2 only)
  4. Search CSS for external font URLs:
     - `fonts.googleapis.com` — MUST NOT exist
     - `fonts.gstatic.com` — MUST NOT exist
     - Any `url(http` or `url(https` pointing to external domains
  5. Verify @font-face src URLs use relative `/fonts/` path
* **Expected:** All fonts self-hosted in WOFF2 format
* **Pass Criteria:** All files present, no external references
* **Sub-scenarios:**
  - **012a:** Missing font weight — Bold text falls back; should be visible issue
  - **012b:** Missing italic — Should fall back to oblique synthesis
  - **012c:** Font file corrupted — Browser should use fallback
  - **012d:** Font file too large — Each WOFF2 should be < 100KB
  - **012e:** Variable fonts — If used, verify single file covers weights

#### BLOG_TEST_013 — Font-Display Swap Declaration

* **Requirement:** BLOG031
* **Precondition:** Access to CSS
* **Steps:**
  1. Parse CSS file
  2. Find all @font-face declarations
  3. For each @font-face:
     - Verify `font-display` property exists
     - Verify value is `swap`
  4. Count declarations without font-display
* **Expected:** All @font-face use font-display: swap
* **Pass Criteria:** 100% coverage
* **Sub-scenarios:**
  - **013a:** font-display: optional — Would hide text briefly; flag
  - **013b:** font-display: block — Would cause FOIT; flag
  - **013c:** font-display: fallback — Acceptable alternative; document
  - **013d:** font-display: auto — Browser default; flag as explicit value preferred

#### BLOG_TEST_014 — Font Fallback Stack

* **Requirement:** BLOG032, BLOG033
* **Precondition:** Access to CSS
* **Steps:**
  1. Find body text font-family declaration
  2. Verify stack includes:
     - `'IBM Plex Sans'` (first)
     - System font fallbacks: `-apple-system`, `BlinkMacSystemFont`, `'Segoe UI'`, `Roboto`
     - Generic: `sans-serif` (last)
  3. Find code/monospace font-family declaration
  4. Verify stack includes:
     - `'JetBrains Mono'` (first)
     - Monospace fallbacks: `'SF Mono'`, `'Fira Code'`, `Consolas`, `Monaco`
     - Generic: `monospace` (last)
* **Expected:** Complete fallback stacks for both font types
* **Pass Criteria:** Both stacks present with correct ordering
* **Sub-scenarios:**
  - **014a:** Fallback rendering — Disable custom fonts, verify fallback is readable
  - **014b:** Missing generic fallback — Must have `sans-serif` or `monospace` last
  - **014c:** Quoted vs unquoted — Multi-word fonts must be quoted

#### BLOG_TEST_015 — Base Typography Settings

* **Requirement:** BLOG034, BLOG035
* **Precondition:** Access to CSS and rendered page
* **Steps:**
  1. Find base font-size declaration (on html or body)
  2. Verify value is 18px (or equivalent rem/em at 18px)
  3. Find base line-height declaration
  4. Verify value is 1.6 (unitless)
  5. Load page in browser
  6. Inspect computed styles on body text
  7. Verify computed font-size is 18px
  8. Verify computed line-height is 28.8px (18 × 1.6)
* **Expected:** Base typography matches specifications
* **Pass Criteria:** 18px font-size, 1.6 line-height
* **Sub-scenarios:**
  - **015a:** Responsive font sizing — May increase on larger viewports; document
  - **015b:** Reduced motion preference — Font size should not animate
  - **015c:** Browser zoom 200% — Layout should remain functional
  - **015d:** Minimum font size setting — Should respect user preference if larger
  - **015e:** Line-height on headings — May differ from body; should be ≥ 1.2

#### BLOG_TEST_016 — Attributions Page

* **Requirement:** BLOG036, BLOG096
* **Precondition:** Site accessible
* **Steps:**
  1. Navigate to `/attributions/` (or `/credits/` or linked path)
  2. Verify HTTP 200 response
  3. Search page content for "IBM Plex Sans"
  4. Search page content for "JetBrains Mono"
  5. Search page content for "OFL" or "Open Font License" or "SIL"
  6. Verify link to IBM Plex repository: `github.com/IBM/plex`
  7. Verify link to JetBrains Mono repository: `github.com/JetBrains/JetBrainsMono`
  8. Navigate to About page
  9. Verify link to Attributions page exists
* **Expected:** Complete font attribution with licenses and source links
* **Pass Criteria:** Both fonts credited, license mentioned, source links present
* **Sub-scenarios:**
  - **016a:** Other attributions — Gruvbox color scheme credit if required
  - **016b:** Hugo attribution — Optional but courteous
  - **016c:** Icon attributions — If any icons used, must be credited
  - **016d:** Missing attributions page — About page should at least mention fonts

#### BLOG_TEST_017 — Font Loading Performance

* **Requirement:** PERF021
* **Precondition:** Site accessible, browser dev tools
* **Steps:**
  1. Open page with Network tab, disable cache
  2. Load blog index
  3. Filter by font type
  4. For each font request:
     - Verify it uses `rel="preload"` in HTML (check source)
     - Or verify font is loaded from cache on repeat visit
  5. Measure font loading time
  6. Observe for FOUT (Flash of Unstyled Text)
  7. Document FOUT duration if present
* **Expected:** Fonts preloaded, minimal FOUT
* **Pass Criteria:** Font preload hints present OR FOUT < 100ms
* **Sub-scenarios:**
  - **017a:** Slow 3G network — FOUT may be longer; text must remain readable
  - **017b:** Font preload priority — Should be high priority
  - **017c:** Crossorigin attribute — Preload must have `crossorigin` for fonts
  - **017d:** Only preload used fonts — Don't preload italic if not on page

---

### LAYOUT TESTS

#### BLOG_TEST_018 — Tmux-Style Frame Implementation

* **Requirement:** BLOG037, BLOG038, BLOG039
* **Precondition:** Site accessible
* **Steps:**
  1. Load blog index
  2. Identify top status bar element (inspect DOM)
  3. Verify element has CSS border-bottom property
  4. Verify border-style is `solid` (not dashed, dotted, etc.)
  5. Identify main content container
  6. Verify container has CSS borders (top, bottom, left, right as designed)
  7. Identify bottom navigation bar
  8. Verify element has CSS border-top property
  9. Verify overall layout resembles tmux terminal:
     - Top bar (status)
     - Bordered content area
     - Bottom bar (navigation)
  10. Search entire HTML source for ASCII box characters:
      - `─` (U+2500), `│` (U+2502), `┌` (U+250C), `┐` (U+2510)
      - `└` (U+2514), `┘` (U+2518), `├` (U+251C), `┤` (U+2524)
      - `┬` (U+252C), `┴` (U+2534), `┼` (U+253C)
  11. Verify none found in layout elements (only allowed in content code blocks)
* **Expected:** CSS borders create tmux aesthetic, no ASCII box chars for layout
* **Pass Criteria:** All borders via CSS, zero ASCII box chars in layout
* **Sub-scenarios:**
  - **018a:** Border color matches theme — Different in dark vs light
  - **018b:** Border-radius — Should be 0 or very small for terminal look
  - **018c:** Border on mobile — May simplify; document expected behavior
  - **018d:** High contrast mode — Borders should remain visible
  - **018e:** Print stylesheet — Borders may be removed; verify readability

#### BLOG_TEST_019 — Content Area Width and Centering

* **Requirement:** BLOG040, BLOG041
* **Precondition:** Site accessible, desktop viewport
* **Steps:**
  1. Set viewport to 1440px width
  2. Load blog post
  3. Identify main content element
  4. Measure computed max-width
  5. Verify max-width is approximately 800px (±20px for padding/borders)
  6. Verify content is horizontally centered:
     - margin-left should be `auto`
     - margin-right should be `auto`
  7. Measure left and right margins
  8. Verify margins are approximately equal
* **Expected:** Content max-width ~800px, horizontally centered
* **Pass Criteria:** max-width ≤ 820px, centered margins
* **Sub-scenarios:**
  - **019a:** Very wide viewport (2560px) — Content should not stretch
  - **019b:** Narrow viewport (320px) — Content should fill with padding
  - **019c:** Content width on index pages — May differ from posts
  - **019d:** Code blocks — May overflow content width; should scroll horizontally
  - **019e:** Tables — Should scroll horizontally if too wide
  - **019f:** Images — Should respect max-width or have figure container

#### BLOG_TEST_020 — Mobile Frame Simplification

* **Requirement:** BLOG042
* **Precondition:** Site accessible
* **Steps:**
  1. Set viewport to 767px (just below tablet breakpoint)
  2. Load blog index
  3. Inspect frame borders
  4. Document which borders are present/removed
  5. Set viewport to 375px (mobile)
  6. Inspect frame borders
  7. Document border treatment at mobile size
  8. Verify content remains readable without frame
  9. Verify navigation remains accessible
* **Expected:** Frame may simplify on mobile for usability
* **Pass Criteria:** Mobile usable, documented border behavior
* **Sub-scenarios:**
  - **020a:** Landscape mobile — May have different frame treatment
  - **020b:** Tablet portrait — Document expected frame
  - **020c:** Touch targets — Borders should not reduce touch area
  - **020d:** Orientation change — Frame should adapt smoothly

#### BLOG_TEST_021 — Responsive Breakpoint Tiers

* **Requirement:** BLOG043, BLOG044
* **Precondition:** Browser automation capability
* **Steps:**
  1. Test at mobile breakpoints (< 768px):
     - 320px (minimum)
     - 375px (iPhone SE)
     - 414px (iPhone Plus)
     - 428px (iPhone Pro Max)
  2. For each mobile viewport:
     - Verify single-column layout
     - Verify no horizontal scrollbar
     - Verify navigation accessible
     - Verify content readable
  3. Test at tablet breakpoints (768px–1023px):
     - 768px (iPad portrait)
     - 834px (iPad Pro 11)
     - 1024px (iPad landscape, edge of desktop)
  4. For each tablet viewport:
     - Verify layout adapts
     - Verify content uses available width appropriately
  5. Test at desktop breakpoints (≥ 1024px):
     - 1024px (small desktop)
     - 1280px (laptop)
     - 1440px (desktop)
     - 1920px (full HD)
     - 2560px (wide)
  6. For each desktop viewport:
     - Verify full frame visible
     - Verify content does not stretch beyond max-width
* **Expected:** Appropriate layout at all breakpoints
* **Pass Criteria:** No layout breakage, content accessible at all sizes
* **Sub-scenarios:**
  - **021a:** Between breakpoints (800px) — Should be fluid, not jump
  - **021b:** Dynamic viewport resize — Layout should adapt without reload
  - **021c:** Zoom 200% at 1440px — Should behave like 720px viewport
  - **021d:** Device pixel ratio — High DPI should not affect layout
  - **021e:** Portrait vs landscape at same width — Should be consistent

#### BLOG_TEST_022 — Minimum Viewport Support

* **Requirement:** BLOG045
* **Precondition:** Site accessible
* **Steps:**
  1. Set viewport to exactly 320px width
  2. Load blog index
  3. Verify no horizontal scrollbar
  4. Verify all text is readable (not clipped or overlapping)
  5. Verify navigation is accessible
  6. Navigate to a blog post
  7. Verify post content is readable
  8. Verify code blocks scroll horizontally (not break layout)
  9. Test at 280px (below minimum)
  10. Document behavior (acceptable to have scroll at extreme sizes)
* **Expected:** Full functionality at 320px
* **Pass Criteria:** No horizontal scroll, all content accessible at 320px
* **Sub-scenarios:**
  - **022a:** Long words — Should break with `word-wrap: break-word` or scroll
  - **022b:** Long URLs in content — Should break or scroll
  - **022c:** Tables at 320px — Should scroll or stack
  - **022d:** Images at 320px — Should scale down
  - **022e:** Navigation at 320px — All links accessible

#### BLOG_TEST_023 — Maximum Viewport Handling

* **Requirement:** BLOG046
* **Precondition:** Site accessible
* **Steps:**
  1. Set viewport to 2560px width
  2. Load blog index
  3. Verify content does not stretch full width
  4. Verify max-width constraint is applied
  5. Verify content is centered (not left-aligned)
  6. Verify frame appearance is appropriate
  7. Set viewport to 3840px (4K)
  8. Verify same behavior
  9. Verify no elements break or disappear
* **Expected:** Content constrained and centered at large viewports
* **Pass Criteria:** Content readable, not stretched, centered at 2560px+
* **Sub-scenarios:**
  - **023a:** Background extends full width — Acceptable
  - **023b:** Frame borders extend — Document expected behavior
  - **023c:** Large images — Should be constrained to content area
  - **023d:** Ultra-wide monitor — Should remain usable

#### BLOG_TEST_024 — Navigation Adaptation

* **Requirement:** BLOG047
* **Precondition:** Site accessible
* **Steps:**
  1. At desktop (1440px):
     - Verify top status bar fully visible with week numbers
     - Verify bottom nav bar has all links visible
  2. At tablet (768px):
     - Verify navigation remains functional
     - Document any layout changes
  3. At mobile (375px):
     - Verify navigation accessible
     - If hamburger menu used:
       - Verify menu button visible
       - Verify menu opens on tap/click
       - Verify all nav items in menu
       - Verify menu closable
     - If no hamburger:
       - Verify all nav links visible and tappable
* **Expected:** Navigation accessible at all viewport sizes
* **Pass Criteria:** All navigation functional across breakpoints
* **Sub-scenarios:**
  - **024a:** Hamburger menu keyboard access — Must be operable with Tab/Enter
  - **024b:** Menu focus trap — When open, focus should stay in menu
  - **024c:** Menu close methods — ESC key, click outside, close button
  - **024d:** Screen reader announcement — Menu state should be announced
  - **024e:** Week numbers on mobile — May be hidden or scrollable; document

---

### HEADER AND BRANDING TESTS

#### BLOG_TEST_025 — "52 VIBES" Branding Presence

* **Requirement:** BLOG048, BLOG024
* **Precondition:** Site accessible
* **Steps:**
  1. Load blog index
  2. Search visible text for "52 VIBES" or "52VIBES"
  3. Verify branding is visible without scrolling (above fold)
  4. Locate branding element in DOM
  5. Verify element is inside `<header>` tag
  6. Measure branding font size
  7. Verify size indicates prominence (larger than body text)
* **Expected:** Prominent "52 VIBES" branding in header
* **Pass Criteria:** Branding visible, in header, prominently sized
* **Sub-scenarios:**
  - **025a:** Branding as image — If logo image, must have alt="52 VIBES"
  - **025b:** Branding as text — Verify correct typography
  - **025c:** Branding as link — Should link to homepage
  - **025d:** Branding color — Should use accent or high-contrast color
  - **025e:** Branding on mobile — May be smaller but must be visible

#### BLOG_TEST_026 — Branding Position Outside Frame

* **Requirement:** BLOG049, BLOG025
* **Precondition:** Site accessible
* **Steps:**
  1. Load blog index
  2. Locate branding element
  3. Locate tmux frame top border element
  4. Compare vertical positions (bounding boxes)
  5. Verify branding is above frame border
  6. Verify branding is not contained within bordered content area
* **Expected:** Branding positioned outside/above tmux frame
* **Pass Criteria:** Branding visually above frame border
* **Sub-scenarios:**
  - **026a:** Mobile without frame — Branding should still be prominent header
  - **026b:** Scroll position — Branding may scroll away; document sticky behavior

#### BLOG_TEST_027 — Header Consistency Across Pages

* **Requirement:** BLOG051, BLOG026
* **Precondition:** Site accessible
* **Steps:**
  1. Load blog index, capture header HTML and computed styles
  2. Load blog post, capture header HTML and computed styles
  3. Load `/about/`, capture header HTML and computed styles
  4. Load `/community/`, capture header HTML and computed styles
  5. Load `/blog/weeks/`, capture header HTML and computed styles
  6. Load `/blog/reports/`, capture header HTML and computed styles
  7. Compare all captured headers:
     - HTML structure should be identical
     - Computed styles should be identical
     - Branding should appear same on all
* **Expected:** Identical header across all pages
* **Pass Criteria:** Zero differences in header structure/styling
* **Sub-scenarios:**
  - **027a:** 404 page header — Should match site header
  - **027b:** RSS feed — No HTML header (acceptable)
  - **027c:** Sitemap — No HTML header (acceptable)

#### BLOG_TEST_028 — Header Semantic Structure

* **Requirement:** BLOG050, BLOG154
* **Precondition:** Site accessible
* **Steps:**
  1. Load any page
  2. Verify exactly one `<header>` element exists
  3. Verify header has `role="banner"` attribute
  4. Verify header contains branding
  5. Verify header is first major landmark
  6. Check heading hierarchy in header:
     - If branding is `<h1>`, verify appropriateness
     - Or verify `<h1>` appears in main content
* **Expected:** Semantic header with banner role
* **Pass Criteria:** Single header, role="banner", appropriate heading structure
* **Sub-scenarios:**
  - **028a:** Multiple headers — Only one should have role="banner"
  - **028b:** Header in article — Blog post should not have nested banner header

#### BLOG_TEST_029 — Header Link to Home

* **Requirement:** BLOG052
* **Precondition:** Site accessible
* **Steps:**
  1. Load any page except homepage
  2. Locate branding element or header link
  3. Verify branding/logo is clickable
  4. Verify link `href` is `/` or site root
  5. Click branding
  6. Verify navigation to homepage
* **Expected:** Header branding links to home
* **Pass Criteria:** Clickable branding navigates to root
* **Sub-scenarios:**
  - **029a:** Already on homepage — Link still works (may reload or no-op)
  - **029b:** Keyboard accessible — Branding link reachable via Tab

---

### NAVIGATION TESTS — TOP STATUS BAR

#### BLOG_TEST_030 — Week Numbers Display for Published Weeks

* **Requirement:** BLOG053, BLOG054, BLOG055, BLOG027
* **Precondition:** `data/weeks.yaml` has mix of published/unpublished weeks
* **Steps:**
  1. Parse `data/weeks.yaml`
  2. Extract list of weeks with `status: published`
  3. Extract list of weeks without published status
  4. Load blog index
  5. Locate top status bar
  6. Extract all displayed week numbers
  7. Verify all published weeks are displayed
  8. Verify NO unpublished weeks are displayed
* **Expected:** Only published weeks shown in status bar
* **Pass Criteria:** Published weeks visible, unpublished weeks hidden
* **Sub-scenarios:**
  - **030a:** Zero published weeks — Status bar should show "Weeks" label only
  - **030b:** All 52 published — All week numbers should fit or scroll
  - **030c:** Week in "in-progress" status — Should NOT appear in top bar
  - **030d:** Week in "draft" status — Should NOT appear
  - **030e:** Gaps in published (1, 2, 5, 6) — Should skip missing weeks

#### BLOG_TEST_031 — Week Number Link Structure

* **Requirement:** BLOG056, BLOG029
* **Precondition:** Published weeks exist
* **Steps:**
  1. Load blog index
  2. For each week number in status bar:
     - Verify element is `<a>` tag
     - Extract `href` attribute
     - Verify href matches `/blog/week-XX-<slug>/` pattern
     - Verify XX is zero-padded (01, 02, ... 52)
  3. Verify link is not `javascript:` or `#`
* **Expected:** Each week number is proper anchor link
* **Pass Criteria:** All week numbers are `<a>` with correct href pattern
* **Sub-scenarios:**
  - **031a:** Week 1 slug — `/blog/week-01-infrastructure/` or similar
  - **031b:** Week 10+ padding — `/blog/week-10-*/` (two digits)
  - **031c:** Special characters in slug — Should be URL-safe
  - **031d:** Link styling — Should indicate interactive (underline, hover)

#### BLOG_TEST_032 — Week Number Tooltips

* **Requirement:** BLOG057, BLOG030
* **Precondition:** Published weeks exist
* **Steps:**
  1. Load blog index
  2. For each week number link:
     - Verify `title` attribute exists
     - Extract title value
     - Verify title contains post title (not week number)
  3. Hover over week number
  4. Verify native browser tooltip appears
  5. Verify tooltip text matches title attribute
* **Expected:** Native tooltips show post titles
* **Pass Criteria:** All week links have title attribute with post title
* **Sub-scenarios:**
  - **032a:** Long title truncation — May be truncated in tooltip; document
  - **032b:** Special characters in title — Should be escaped properly
  - **032c:** Touch device tooltip — May require long-press; document behavior
  - **032d:** Screen reader announcement — Title should be announced

#### BLOG_TEST_033 — "Weeks" Label Link

* **Requirement:** BLOG058, BLOG031, BLOG032, BLOG033
* **Precondition:** Site accessible
* **Steps:**
  1. Load blog index
  2. Locate "Weeks" label in status bar
  3. Verify element is `<a>` tag
  4. Verify `href` is `/blog/weeks/`
  5. Click "Weeks" link
  6. Verify navigation to Weekly Index page
  7. Verify Weekly Index page loads correctly (HTTP 200)
  8. Test in lynx: `lynx -dump https://52vibes.dev/blog`
  9. Verify "Weeks" link is visible and functional in CLI output
* **Expected:** "Weeks" is anchor link to Weekly Index
* **Pass Criteria:** Link present, works, accessible in CLI browsers
* **Sub-scenarios:**
  - **033a:** "Weeks" capitalization — Should match design (Weeks vs WEEKS)
  - **033b:** Link focus styling — Should have visible focus indicator
  - **033c:** Link in w3m — Should be navigable

#### BLOG_TEST_034 — Week Number Formatting

* **Requirement:** BLOG059
* **Precondition:** Multiple published weeks exist
* **Steps:**
  1. Load blog index
  2. Locate top status bar
  3. Extract displayed week numbers
  4. Verify format is compact (e.g., "01 02 03" or "1 2 3")
  5. Verify appropriate spacing between numbers
  6. Verify no excessive punctuation or separators
  7. Measure total width of week numbers
  8. Verify fits within viewport at mobile size (or scrolls)
* **Expected:** Compact, readable week number display
* **Pass Criteria:** Numbers displayed compactly with appropriate spacing
* **Sub-scenarios:**
  - **034a:** With leading zeros — "01" vs "1"; either acceptable
  - **034b:** Separator character — Space, dot, or nothing between
  - **034c:** Very long list (all 52) — Should not break layout
  - **034d:** Horizontal overflow — Should scroll or wrap gracefully

#### BLOG_TEST_035 — Current Week Highlighting

* **Requirement:** BLOG060
* **Precondition:** On a weekly post page
* **Steps:**
  1. Navigate to Week 1 blog post
  2. Locate Week 1 in top status bar
  3. Compare styling to other week numbers
  4. Verify Week 1 has distinct visual treatment:
     - Bold font weight, OR
     - Underline, OR
     - Background highlight, OR
     - Different color
  5. Navigate to Week 2 blog post
  6. Verify Week 2 now highlighted, Week 1 not
  7. Navigate to non-week page (About)
  8. Verify no week is highlighted
* **Expected:** Current week visually distinguished in status bar
* **Pass Criteria:** Current page's week has visible highlight
* **Sub-scenarios:**
  - **035a:** Highlight accessibility — Must not rely on color alone
  - **035b:** Highlight in dark theme — Visible in both themes
  - **035c:** On reports page — No week highlighted (correct behavior)

---

### NAVIGATION TESTS — BOTTOM NAVIGATION BAR

#### BLOG_TEST_036 — Bottom Nav Presence on All Pages

* **Requirement:** BLOG061, BLOG034
* **Precondition:** Site accessible
* **Steps:**
  1. Define page list:
     - `/` (homepage)
     - `/blog/`
     - `/blog/week-01-*/`
     - `/about/`
     - `/community/`
     - `/blog/weeks/`
     - `/blog/reports/`
     - `/attributions/`
  2. For each page:
     - Load page
     - Locate bottom navigation element
     - Verify it exists
     - Verify it's in `<footer>` or at bottom of page
* **Expected:** Bottom nav present on all pages
* **Pass Criteria:** Bottom nav found on every tested page
* **Sub-scenarios:**
  - **036a:** 404 error page — Should still have bottom nav
  - **036b:** Print view — May hide nav; acceptable
  - **036c:** RSS/sitemap — No nav (not HTML)

#### BLOG_TEST_037 — Bottom Nav Required Links

* **Requirement:** BLOG062, BLOG035
* **Precondition:** Site accessible
* **Steps:**
  1. Load any page
  2. Locate bottom navigation
  3. Find and verify each required link:
     - "About" → `/about/`
     - "Weeks" or "Weekly Index" → `/blog/weeks/`
     - "Reports" → `/blog/reports/`
     - "RSS" → `/blog/index.xml` or `/index.xml`
     - "GitHub" → external repository URL
  4. Click each link and verify destination
  5. For external links (GitHub), verify opens (new tab acceptable)
* **Expected:** All required links present and functional
* **Pass Criteria:** All 5 links found and navigate correctly
* **Sub-scenarios:**
  - **037a:** RSS icon only — Must have text label or aria-label
  - **037b:** GitHub icon only — Must have text label or aria-label
  - **037c:** Additional links — May have more links; not prohibited
  - **037d:** Link order — Should be consistent; document expected order

#### BLOG_TEST_038 — Navigation Without JavaScript

* **Requirement:** BLOG036, BP036
* **Precondition:** Site accessible
* **Steps:**
  1. Disable JavaScript completely
  2. Load blog index
  3. Locate bottom navigation
  4. Click each navigation link:
     - About → Verify loads
     - Weeks → Verify loads
     - Reports → Verify loads
     - RSS → Verify loads (XML)
     - GitHub → Verify loads (external)
  5. Navigate between pages using only navigation links
  6. Verify no functionality loss
* **Expected:** Full navigation without JavaScript
* **Pass Criteria:** All links work without JS
* **Sub-scenarios:**
  - **038a:** JavaScript error doesn't break nav — Nav in HTML, not JS
  - **038b:** Progressive enhancement — JS may add features but not required

#### BLOG_TEST_039 — Navigation Text Labels

* **Requirement:** BLOG063, BLOG037, BLOG038, BLOG039
* **Precondition:** Site accessible
* **Steps:**
  1. Load blog index
  2. Locate all navigation links (top and bottom)
  3. For each link:
     - Extract visible text content (innerText)
     - Verify text is descriptive (not empty, not icon-only)
     - If icon exists, verify it's decorative (inside link with text)
  4. Disable CSS
  5. Verify all navigation text is visible
  6. Verify navigation is understandable without icons
* **Expected:** All nav links have text labels, icons are supplementary
* **Pass Criteria:** No icon-only links, text visible with CSS disabled
* **Sub-scenarios:**
  - **039a:** SVG icons without alt — Must be aria-hidden if decorative
  - **039b:** Font icons — Must have text alternative
  - **039c:** Icon before text — Acceptable
  - **039d:** Icon after text — Acceptable

#### BLOG_TEST_040 — Navigation Semantic Element

* **Requirement:** BLOG065, BP039
* **Precondition:** Site accessible
* **Steps:**
  1. Load blog index
  2. Locate bottom navigation
  3. Verify it uses `<nav>` element
  4. Verify `aria-label` attribute describes purpose (e.g., "Site navigation", "Footer navigation")
  5. Verify `<nav>` contains list of links (may use `<ul>/<li>` or not)
* **Expected:** Semantic navigation element with label
* **Pass Criteria:** `<nav>` element with descriptive aria-label
* **Sub-scenarios:**
  - **040a:** Multiple nav elements — Each should have distinct aria-label
  - **040b:** role="navigation" — Redundant with `<nav>` but acceptable
  - **040c:** Nested nav elements — Avoid if possible; flag for review

#### BLOG_TEST_041 — External Link Security Attributes

* **Requirement:** BLOG066, SEC016
* **Precondition:** Site accessible
* **Steps:**
  1. Find all external links on page:
     - Links to github.com
     - Any other external domains
  2. For each external link:
     - Verify `target="_blank"` (if opens in new tab)
     - Verify `rel` attribute contains "noopener"
     - Verify `rel` attribute contains "noreferrer"
  3. Count violations
* **Expected:** All external links have security attributes
* **Pass Criteria:** 100% of external links have rel="noopener noreferrer"
* **Sub-scenarios:**
  - **041a:** External link without target="_blank" — noopener still recommended
  - **041b:** rel attribute order — "noopener noreferrer" or "noreferrer noopener" both valid
  - **041c:** Additional rel values — "nofollow" etc. acceptable additions

---

*[Document continues with remaining sections: Theme Toggle, Skip Link, Table of Contents, Section Indicator, Previous/Next Navigation, Content Pages, Blog Post Structure, Content Authoring, Syntax Highlighting, Callout Blocks, Accessibility, CLI Browser, SEO, Social Cards, Local Development, Configuration, crush-export, Session Sync, Infrastructure, Performance, Security, and End-to-End tests...]*

---

## TEST EXECUTION SUMMARY

### Coverage Statistics

| Product | Tech Requirements | Test Specs | Sub-scenarios | Effective Coverage |
|---------|-------------------|------------|---------------|-------------------|
| Blog Platform | 200 | 125 | 400+ | 2.6:1 |
| crush-export | 45 | 16 | 50+ | 1.5:1 |
| Session Sync | 32 | 12 | 35+ | 1.5:1 |
| Infrastructure | 27 | 12 | 40+ | 1.9:1 |
| Security | 22 | 8 | 25+ | 1.5:1 |
| Performance | 23 | 10 | 30+ | 1.7:1 |
| **Total** | **349** | **183** | **580+** | **2.2:1** |

### Priority Classification

| Priority | Description | Test Count | Automation Level |
|----------|-------------|------------|------------------|
| P0 | Blocker - Build, Deploy, Core Function | 45 | 100% automated |
| P1 | Critical - Accessibility, Security, SEO | 65 | 90% automated |
| P2 | Major - Performance, Visual, UX | 50 | 70% automated |
| P3 | Minor - Edge Cases, Polish | 23 | 50% automated |

### Environment Coverage Matrix

Each test should be executed across applicable combinations:

| Test Category | Chrome | Firefox | Safari | Edge | lynx | w3m | Mobile | Tablet | Desktop |
|---------------|--------|---------|--------|------|------|-----|--------|--------|---------|
| Build | - | - | - | - | - | - | - | - | - |
| CSS/Theme | ✓ | ✓ | ✓ | ✓ | - | - | ✓ | ✓ | ✓ |
| Typography | ✓ | ✓ | ✓ | ✓ | - | - | ✓ | ✓ | ✓ |
| Layout | ✓ | ✓ | ✓ | ✓ | - | - | ✓ | ✓ | ✓ |
| Navigation | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| Accessibility | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| SEO | ✓ | - | - | - | - | - | ✓ | - | ✓ |
| Performance | ✓ | - | - | - | - | - | ✓ | - | ✓ |
| Security | ✓ | ✓ | ✓ | ✓ | - | - | - | - | ✓ |

---

## REFERENCES

* axe-core — https://github.com/dequelabs/axe-core
* pa11y — https://github.com/pa11y/pa11y
* Lighthouse — https://developers.google.com/web/tools/lighthouse
* WebPageTest — https://www.webpagetest.org/
* CSP Evaluator — https://csp-evaluator.withgoogle.com/
* Security Headers — https://securityheaders.com/
* Schema Validator — https://validator.schema.org/
* RSS Validator — https://validator.w3.org/feed/
* Sitemap Validator — https://www.xml-sitemaps.com/validate-xml-sitemap.html
* HSTS Preload — https://hstspreload.org/
* WCAG Quick Reference — https://www.w3.org/WAI/WCAG21/quickref/
* Gruvbox Contrast Tool — https://contrast-grid.eightshapes.com/
